{
  "_fv": 47,
  "_type": "procedure",
  "definition": {
    "procedurexml": "<xml xmlns=\"https://developers.google.com/blockly/xml\"><block type=\"event_trigger\" deletable=\"false\" x=\"52\" y=\"63\"><field name=\"trigger\">no_ext_trigger</field><next><block type=\"controls_if\"><value name=\"IF0\"><block type=\"logic_binary_ops\"><field name=\"OP\">OR</field><value name=\"A\"><block type=\"logic_binary_ops\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"compare_mcitems\"><value name=\"a\"><block type=\"entity_iteminhand\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value></block></value><value name=\"b\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:ShaYingcrc</field></block></value></block></value><value name=\"B\"><block type=\"java_code_get\"><field name=\"CODE\">!((ShaYingcrcItem) (entity instanceof LivingEntity _livEnt ? _livEnt.getMainHandItem() : ItemStack.EMPTY).getItem()).isReloading()&amp;#10;\t\t\t&amp;&amp; !((ShaYingcrcItem) (entity instanceof LivingEntity _livEnt ? _livEnt.getMainHandItem() : ItemStack.EMPTY).getItem()).isFull()&amp;#10;\t\t\t\t</field></block></value></block></value><value name=\"B\"><block type=\"logic_binary_ops\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"compare_mcitems\"><value name=\"a\"><block type=\"entity_iteminoffhand\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value></block></value><value name=\"b\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:ShaYingcrc</field></block></value></block></value><value name=\"B\"><block type=\"java_code_get\"><field name=\"CODE\">!((ShaYingcrcItem) (entity instanceof LivingEntity _livEnt ? _livEnt.getOffhandItem() : ItemStack.EMPTY).getItem()).isReloading()&amp;#10;\t\t\t&amp;&amp; !((ShaYingcrcItem) (entity instanceof LivingEntity _livEnt ? _livEnt.getOffhandItem() : ItemStack.EMPTY).getItem()).isFull()&amp;#10;\t\t\t\t</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><value name=\"IF0\"><block type=\"logic_binary_ops\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"compare_mcitems\"><value name=\"a\"><block type=\"entity_iteminhand\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value></block></value><value name=\"b\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:ShaYingcrc</field></block></value></block></value><value name=\"B\"><block type=\"java_code_get\"><field name=\"CODE\">!((ShaYingcrcItem) (entity instanceof LivingEntity _livEnt ? _livEnt.getMainHandItem() : ItemStack.EMPTY).getItem()).isReloading()&amp;#10;\t\t\t&amp;&amp; !((ShaYingcrcItem) (entity instanceof LivingEntity _livEnt ? _livEnt.getMainHandItem() : ItemStack.EMPTY).getItem()).isFull()&amp;#10;\t\t\t\t</field></block></value></block></value><statement name=\"DO0\"><block type=\"java_code\"><field name=\"CODE\">if(entity instanceof Player player &amp;&amp;world instanceof ServerLevel serverLevel){&amp;#10;\t\t\t\t\t((ShaYingcrcItem) (entity instanceof LivingEntity _livEnt ? _livEnt.getMainHandItem() : ItemStack.EMPTY).getItem()).reloadAnim(serverLevel, player,player.getMainHandItem());&amp;#10;\t\t\t\t}</field></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><block type=\"compare_mcitems\"><value name=\"a\"><block type=\"entity_iteminhand\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value></block></value><value name=\"b\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:ShaYingcrc</field></block></value></block></value><statement name=\"DO0\"><block type=\"play_sound\"><field name=\"sound\">CUSTOM:deserteagelcrcreload</field><field name=\"soundcategory\">player</field><value name=\"x\"><block type=\"coord_x\"></block></value><value name=\"y\"><block type=\"coord_y\"></block></value><value name=\"z\"><block type=\"coord_z\"></block></value><value name=\"level\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value><value name=\"pitch\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value><next><block type=\"java_code\"><field name=\"CODE\">new Thread(() -&gt; {&amp;#10;\t\t\t\t\tShaYingcrcItem item = ((ShaYingcrcItem) (entity instanceof LivingEntity _livEnt ? _livEnt.getMainHandItem() : ItemStack.EMPTY).getItem());&amp;#10;\t\t\t\t\tint need = item.need();&amp;#10;\t\t\t\t\t//Player player = (Player) entity;&amp;#10;\t\t\t\t\tServerPlayer player = (ServerPlayer) entity;&amp;#10;\t\t\t\t\tItemStack stack = ProjectileWeaponItem.getHeldProjectile(player, e -&gt; e.getItem() == SimpledeserteagleModItems.DESERT_EAGLE_AMMO.get());&amp;#10;\t\t\t\t\tif (stack == ItemStack.EMPTY) {&amp;#10;\t\t\t\t\t\tfor (int i = 0; i &lt; player.getInventory().items.size(); i++) {&amp;#10;\t\t\t\t\t\t\tItemStack teststack = player.getInventory().items.get(i);&amp;#10;\t\t\t\t\t\t\tif (teststack != null &amp;&amp; teststack.getItem() == SimpledeserteagleModItems.DESERT_EAGLE_AMMO.get()) {&amp;#10;\t\t\t\t\t\t\t\tstack = teststack;&amp;#10;\t\t\t\t\t\t\t\tbreak;&amp;#10;\t\t\t\t\t\t\t}&amp;#10;\t\t\t\t\t\t}&amp;#10;\t\t\t\t\t}&amp;#10;\t\t\t\t\tfor (int i = 0; i &lt; player.getInventory().items.size(); i++) {&amp;#10;\t\t\t\t\t\tItemStack teststack = player.getInventory().items.get(i);&amp;#10;\t\t\t\t\t\tif (teststack != null &amp;&amp; teststack.getItem() == SimpledeserteagleModItems.DESERT_EAGLE_AMMO.get()) {&amp;#10;\t\t\t\t\t\t\tstack = teststack;&amp;#10;\t\t\t\t\t\t\tbreak;&amp;#10;\t\t\t\t\t\t}&amp;#10;\t\t\t\t\t}&amp;#10;\t\t\t\t\tif (stack != ItemStack.EMPTY) {&amp;#10;\t\t\t\t\t\tif (stack.getCount() &gt;= need) {&amp;#10;\t\t\t\t\t\t\tstack.shrink(need);&amp;#10;\t\t\t\t\t\t\titem.reload(need);&amp;#10;\t\t\t\t\t\t} else {&amp;#10;\t\t\t\t\t\t\tint cnt = stack.getCount();&amp;#10;\t\t\t\t\t\t\tstack.shrink(cnt);&amp;#10;\t\t\t\t\t\t\titem.reload(cnt);&amp;#10;\t\t\t\t\t\t\tif (world instanceof ServerLevel _level)&amp;#10;\t\t\t\t\t\t\t\t_level.getServer().getCommands().performPrefixedCommand(new CommandSourceStack(CommandSource.NULL, new Vec3(x, y, z), Vec2.ZERO, _level, 4, \"\", Component.literal(\"\"), _level.getServer(), null).withSuppressedOutput(),&amp;#10;\t\t\t\t\t\t\t\t\t\t\"title @p actionbar \\\"No Ammo!\\\"\");&amp;#10;\t\t\t\t\t\t}&amp;#10;\t\t\t\t\t\tif (stack.isEmpty())&amp;#10;\t\t\t\t\t\t\tplayer.getInventory().removeItem(stack);&amp;#10;\t\t\t\t\t} else {&amp;#10;\t\t\t\t\t\tif (world instanceof ServerLevel _level)&amp;#10;\t\t\t\t\t\t\t_level.getServer().getCommands().performPrefixedCommand(new CommandSourceStack(CommandSource.NULL, new Vec3(x, y, z), Vec2.ZERO, _level, 4, \"\", Component.literal(\"\"), _level.getServer(), null).withSuppressedOutput(),&amp;#10;\t\t\t\t\t\t\t\t\t\"title @p actionbar \\\"No Ammo!\\\"\");&amp;#10;\t\t\t\t\t}&amp;#10;\t\t\t\t\ttry {&amp;#10;\t\t\t\t\t\tThread.sleep(ShaYingcrcItem.RELOAD_TIME);&amp;#10;\t\t\t\t\t} catch (InterruptedException e) {&amp;#10;\t\t\t\t\t\tthrow new RuntimeException(e);&amp;#10;\t\t\t\t\t}&amp;#10;\t\t\t\t\tif (world instanceof ServerLevel _level)&amp;#10;\t\t\t\t\t\t_level.getServer().getCommands().performPrefixedCommand(new CommandSourceStack(CommandSource.NULL, new Vec3(x, y, z), Vec2.ZERO, _level, 4, \"\", Component.literal(\"\"), _level.getServer(), null).withSuppressedOutput(),&amp;#10;\t\t\t\t\t\t\t\t\"title @p actionbar \\\"\" + ((ShaYingcrcItem) (entity instanceof LivingEntity _livEnt ? _livEnt.getMainHandItem() : ItemStack.EMPTY).getItem()).getMagazine() + \"/7\" + \"\\\"\");&amp;#10;\t\t\t\t}).start();</field></block></next></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><block type=\"logic_binary_ops\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"compare_mcitems\"><value name=\"a\"><block type=\"entity_iteminoffhand\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value></block></value><value name=\"b\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:ShaYingcrc</field></block></value></block></value><value name=\"B\"><block type=\"java_code_get\"><field name=\"CODE\">!((ShaYingcrcItem) (entity instanceof LivingEntity _livEnt ? _livEnt.getMainHandItem() : ItemStack.EMPTY).getItem()).isReloading()&amp;#10;\t\t\t&amp;&amp; !((ShaYingcrcItem) (entity instanceof LivingEntity _livEnt ? _livEnt.getMainHandItem() : ItemStack.EMPTY).getItem()).isFull()&amp;#10;\t\t\t\t</field></block></value></block></value><statement name=\"DO0\"><block type=\"java_code\"><field name=\"CODE\">if(entity instanceof Player player &amp;&amp;world instanceof ServerLevel serverLevel){&amp;#10;\t\t\t\t\t((ShaYingcrcItem) (entity instanceof LivingEntity _livEnt ? _livEnt.getOffhandItem() : ItemStack.EMPTY).getItem()).reloadAnim(serverLevel, player,player.getMainHandItem());&amp;#10;\t\t\t\t}</field></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><block type=\"compare_mcitems\"><value name=\"a\"><block type=\"entity_iteminoffhand\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value></block></value><value name=\"b\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:ShaYingcrc</field></block></value></block></value><statement name=\"DO0\"><block type=\"play_sound\"><field name=\"sound\">CUSTOM:deserteagelcrcreload</field><field name=\"soundcategory\">player</field><value name=\"x\"><block type=\"coord_x\"></block></value><value name=\"y\"><block type=\"coord_y\"></block></value><value name=\"z\"><block type=\"coord_z\"></block></value><value name=\"level\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value><value name=\"pitch\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value><next><block type=\"java_code\"><field name=\"CODE\">new Thread(() -&gt; {&amp;#10;\t\t\t\t\tShaYingcrcItem item = ((ShaYingcrcItem) (entity instanceof LivingEntity _livEnt ? _livEnt.getOffhandItem() : ItemStack.EMPTY).getItem());&amp;#10;\t\t\t\t\tint need = item.need();&amp;#10;\t\t\t\t\tServerPlayer player = (ServerPlayer) entity;&amp;#10;\t\t\t\t\tItemStack stack = ProjectileWeaponItem.getHeldProjectile(player, e -&gt; e.getItem() == SimpledeserteagleModItems.DESERT_EAGLE_AMMO.get());&amp;#10;\t\t\t\t\tif (stack == ItemStack.EMPTY) {&amp;#10;\t\t\t\t\t\tfor (int i = 0; i &lt; player.getInventory().items.size(); i++) {&amp;#10;\t\t\t\t\t\t\tItemStack teststack = player.getInventory().items.get(i);&amp;#10;\t\t\t\t\t\t\tif (teststack != null &amp;&amp; teststack.getItem() == SimpledeserteagleModItems.DESERT_EAGLE_AMMO.get()) {&amp;#10;\t\t\t\t\t\t\t\tstack = teststack;&amp;#10;\t\t\t\t\t\t\t\tbreak;&amp;#10;\t\t\t\t\t\t\t}&amp;#10;\t\t\t\t\t\t}&amp;#10;\t\t\t\t\t}&amp;#10;\t\t\t\t\tif (stack != ItemStack.EMPTY) {&amp;#10;\t\t\t\t\t\tif (stack.getCount() &gt;= need) {&amp;#10;\t\t\t\t\t\t\tstack.shrink(need);&amp;#10;\t\t\t\t\t\t\titem.reload(need);&amp;#10;\t\t\t\t\t\t} else {&amp;#10;\t\t\t\t\t\t\tint cnt = stack.getCount();&amp;#10;\t\t\t\t\t\t\tstack.shrink(cnt);&amp;#10;\t\t\t\t\t\t\titem.reload(cnt);&amp;#10;\t\t\t\t\t\t\tif (world instanceof ServerLevel _level)&amp;#10;\t\t\t\t\t\t\t\t_level.getServer().getCommands().performPrefixedCommand(new CommandSourceStack(CommandSource.NULL, new Vec3(x, y, z), Vec2.ZERO, _level, 4, \"\", Component.literal(\"\"), _level.getServer(), null).withSuppressedOutput(),&amp;#10;\t\t\t\t\t\t\t\t\t\t\"title @p actionbar \\\"No Ammo!\\\"\");&amp;#10;\t\t\t\t\t\t}&amp;#10;\t\t\t\t\t\tif (stack.isEmpty())&amp;#10;\t\t\t\t\t\t\tplayer.getInventory().removeItem(stack);&amp;#10;\t\t\t\t\t}else{&amp;#10;\t\t\t\t\t\tif (world instanceof ServerLevel _level)&amp;#10;\t\t\t\t\t\t\t_level.getServer().getCommands().performPrefixedCommand(new CommandSourceStack(CommandSource.NULL, new Vec3(x, y, z), Vec2.ZERO, _level, 4, \"\", Component.literal(\"\"), _level.getServer(), null).withSuppressedOutput(),&amp;#10;\t\t\t\t\t\t\t\t\t\"title @p actionbar \\\"No Ammo!\\\"\");&amp;#10;\t\t\t\t\t}&amp;#10;\t\t\t\t\ttry {&amp;#10;\t\t\t\t\t\tThread.sleep(ShaYingcrcItem.RELOAD_TIME);&amp;#10;\t\t\t\t\t} catch (InterruptedException e) {&amp;#10;\t\t\t\t\t\tthrow new RuntimeException(e);&amp;#10;\t\t\t\t\t}&amp;#10;\t\t\t\t\tif (world instanceof ServerLevel _level)&amp;#10;\t\t\t\t\t\t_level.getServer().getCommands().performPrefixedCommand(new CommandSourceStack(CommandSource.NULL, new Vec3(x, y, z), Vec2.ZERO, _level, 4, \"\", Component.literal(\"\"), _level.getServer(), null).withSuppressedOutput(),&amp;#10;\t\t\t\t\t\t\t\t\"title @p actionbar \\\"\" + ((ShaYingcrcItem) (entity instanceof LivingEntity _livEnt ? _livEnt.getOffhandItem() : ItemStack.EMPTY).getItem()).getMagazine() + \"/7\" + \"\\\"\");&amp;#10;\t\t\t\t}).start();</field></block></next></block></statement></block></next></block></next></block></next></block></statement></block></next></block><block type=\"item_animation\" x=\"756\" y=\"526\"><field name=\"name\"></field><value name=\"item\"><block type=\"entity_iteminhand\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value></block></value><value name=\"animation\"><block type=\"text\"><field name=\"TEXT\">animation.DesertEagelCRC.reload</field></block></value></block><block type=\"item_animation\" x=\"866\" y=\"1181\"><field name=\"name\">CUSTOM:ShaYingcrc</field><value name=\"item\"><block type=\"entity_iteminoffhand\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value></block></value><value name=\"animation\"><block type=\"text\"><field name=\"TEXT\">animation.DesertEagelCRC.reload</field></block></value></block></xml>"
  }
}